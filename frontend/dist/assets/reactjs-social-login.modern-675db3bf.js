import{j as se,r as o,R as q}from"./index-57b17ab7.js";import{c as de}from"./createSvgIcon-0c6544b4.js";const pe=de(se.jsx("path",{d:"M12.545,10.239v3.821h5.445c-0.712,2.315-2.647,3.972-5.445,3.972c-3.332,0-6.033-2.701-6.033-6.032s2.701-6.032,6.033-6.032c1.498,0,2.866,0.549,3.921,1.453l2.814-2.814C17.503,2.988,15.139,2,12.545,2C7.021,2,2.543,6.477,2.543,12s4.478,10,10.002,10c8.396,0,10.249-7.85,9.426-11.748L12.545,10.239z"}),"Google");function U(){return(U=Object.assign||function(e){for(var u=1;u<arguments.length;u++){var d=arguments[u];for(var v in d)Object.prototype.hasOwnProperty.call(d,v)&&(e[v]=d[v])}return e}).apply(this,arguments)}function ae(e,u){(u==null||u>e.length)&&(u=e.length);for(var d=0,v=new Array(u);d<u;d++)v[d]=e[d];return v}var ne=window;o.memo(function(e){var u=e.state,d=u===void 0?"":u,v=e.client_id,E=e.className,w=e.redirect_uri,C=e.scope,_=C===void 0?"profile":C,N=e.isOnlyGetToken,g=N!==void 0&&N,R=e.scope_data,I=R===void 0?{profile:{essential:!0}}:R,P=e.response_type,j=P===void 0?"token":P,T=e.children,c=e.onReject,p=e.onResolve,a=e.onLoginStart,l=o.useRef(null),f=o.useState(!1),L=f[0],b=f[1];o.useEffect(function(){!L&&r()},[L]),o.useEffect(function(){return function(){l.current&&l.current.remove()}},[]);var k=o.useCallback(function(){return!!document.getElementById("amazon-login")},[]),s=o.useCallback(function(m,y,K,F,S){y===void 0&&(y="script");var z=m.createElement(y);z.id=K,z.src=F,z.async=!0,z.defer=!0;var G=document.getElementsByTagName("script")[0];l.current=z,G&&G.parentNode&&G.parentNode.insertBefore(z,G),z.onload=S},[]),i=o.useCallback(function(m){try{return fetch("https://api.amazon.com/user/profile",{headers:{Authorization:"Bearer "+m.access_token}}).then(function(y){return y.json()}).then(function(y){p({provider:"amazon",data:U({},y,m)})}).catch(function(y){c(y)}).finally(function(){}),Promise.resolve()}catch(y){return Promise.reject(y)}},[c,p]),n=o.useCallback(function(m){g?p({provider:"amazon",data:U({},m)}):i(m)},[i,p,g]),t=o.useCallback(function(m){c(m)},[c]),r=o.useCallback(function(){k()?b(!0):s(document,"script","amazon-login","https://assets.loginwithamazon.com/sdk/na/login1.js",function(){ne.amazon.Login.setClientId(v),b(!0)})},[k,v,s]),h=o.useCallback(function(){L&&(ne.amazon?(a&&a(),ne.amazon.Login.authorize({scope:_,scope_data:I,response_type:j,redirect_uri:w,state:d},function(m){m.error?t(m.error):n(m)})):(r(),c("Google SDK isn't loaded!")))},[r,_,d,c,I,L,t,a,w,j,n]);return q.createElement("div",{className:E,onClick:h},T)});var re=window;o.memo(function(e){var u=e.appId,d=e.scope,v=d===void 0?"email,public_profile":d,E=e.state,w=E===void 0||E,C=e.xfbml,_=C===void 0||C,N=e.cookie,g=N===void 0||N,R=e.version,I=R===void 0?"v2.7":R,P=e.language,j=P===void 0?"en_EN":P,T=e.auth_type,c=T===void 0?"":T,p=e.className,a=e.onLoginStart,l=e.onReject,f=e.onResolve,L=e.redirect_uri,b=e.fieldsProfile,k=b===void 0?"id,first_name,last_name,middle_name,name,name_format,picture,short_name,email,gender":b,s=e.response_type,i=s===void 0?"code":s,n=e.return_scopes,t=n===void 0||n,r=e.isOnlyGetToken,h=r!==void 0&&r,m=e.children,y=o.useRef(null),K=o.useState(!1),F=K[0],S=K[1],z=o.useState(!1),G=z[0],O=z[1];o.useEffect(function(){!F&&W()},[F]),o.useEffect(function(){return function(){y.current&&y.current.remove()}},[]);var A=o.useCallback(function(D,$){var x=D.createElement("script");x.id="facebook-jssdk",x.src="https://connect.facebook.net/en_EN/sdk.js";var B=D.getElementsByTagName("script")[0];B&&B.parentNode&&B.parentNode.insertBefore(x,B),$()},[]),Q=o.useCallback(function(){return!!document.getElementById("facebook-jssdk")},[]),M=o.useCallback(function(D,$){var x=window;x.fbAsyncInit=function(){x.FB&&x.FB.init(U({},D)),S(!0);var B=$.getElementById("fb-root");B||((B=$.createElement("div")).id="fb-root",$.body.appendChild(B)),y.current=B}},[]),X=o.useCallback(function(D){re.FB.api("/me",{locale:j,fields:k},function($){f({provider:"facebook",data:U({},D,$)})})},[k,j,f]),Y=o.useCallback(function(D){D.authResponse?h?f({provider:"facebook",data:U({},D.authResponse)}):X(D.authResponse):l(D),O(!1)},[X,h,l,f]),W=o.useCallback(function(){Q()?S(!0):A(document,function(){M({appId:u,xfbml:_,version:I,state:w,cookie:g,redirect_uri:L,response_type:i},document)})},[w,u,_,g,I,M,L,i,A,Q]),Z=o.useCallback(function(){F&&!G&&(re.FB?(O(!0),a&&a(),re.FB.login(Y,{scope:v,return_scopes:t,auth_type:c})):(W(),l("Fb isn't loaded!"),O(!1)))},[W,v,l,c,F,a,G,t,Y]);return q.createElement("div",{className:p,onClick:Z},m)});var J="875c0462-6309-4ddf-9889-5227b1acc82c",te=window,me=o.memo(function(e){var u=e.client_id,d=e.scope,v=d===void 0?"https://www.googleapis.com/auth/userinfo.profile":d,E=e.prompt,w=E===void 0?"select_account":E,C=e.typeResponse,_=C===void 0?"accessToken":C,N=e.ux_mode,g=e.className,R=g===void 0?"":g,I=e.login_hint,P=I===void 0?"":I,j=e.access_type,T=j===void 0?"online":j,c=e.onLoginStart,p=e.onReject,a=e.onResolve,l=e.redirect_uri,f=l===void 0?"/":l,L=e.auto_select,b=L!==void 0&&L,k=e.isOnlyGetToken,s=k!==void 0&&k,i=e.cookie_policy,n=i===void 0?"single_host_origin":i,t=e.hosted_domain,r=t===void 0?"":t,h=e.discoveryDocs,m=h===void 0?"":h,y=e.children,K=e.fetch_basic_profile,F=K===void 0||K,S=o.useRef(null),z=o.useState(!1),G=z[0],O=z[1],A=o.useState(null),Q=A[0],M=A[1];o.useEffect(function(){!G&&D()},[G]),o.useEffect(function(){return function(){S.current&&S.current.remove()}},[]);var X=o.useCallback(function(){return!!document.getElementById("google-login")},[]),Y=o.useCallback(function(x,B,H,ee,ce){B===void 0&&(B="script");var V=x.createElement(B);V.id=H,V.src=ee,V.async=!0,V.defer=!0;var oe=document.getElementsByTagName("script")[0];S.current=V,oe&&oe.parentNode&&oe.parentNode.insertBefore(V,oe),V.onload=ce},[]),W=o.useCallback(function(x){if(_==="accessToken"){var B=new Headers({"Content-Type":"application/x-www-form-urlencoded","x-cors-grida-api-key":J,Authorization:"Bearer "+x.access_token});fetch("https://cors.bridged.cc/https://www.googleapis.com/oauth2/v3/userinfo?alt=json",{method:"GET",headers:B}).then(function(H){return H.json()}).then(function(H){var ee=U({},x,H);a({provider:"google",data:ee})}).catch(function(H){p(H)})}else fetch("https://www.googleapis.com/oauth2/v3/tokeninfo?id_token="+x.credential,{method:"GET"}).then(function(H){return H.json()}).then(function(H){console.log("ðŸš€ ~ file: index.tsx ~ line 153 ~ response",H);var ee=U({},x,H);a({provider:"google",data:ee})}).catch(function(H){p(H)})},[_,p,a]),Z=o.useCallback(function(x){s?a({provider:"google",data:x}):W(x)},[s,W,a]),D=o.useCallback(function(){X()?O(!0):Y(document,"script","google-login","https://accounts.google.com/gsi/client",function(){var x={client_id:u,ux_mode:N},B=null;_==="idToken"?te.google.accounts.id.initialize(U({},x,{auto_select:b,callback:Z})):B=te.google.accounts.oauth2.initTokenClient(U({},x,{scope:v,prompt:w,login_hint:P,access_type:T,hosted_domain:r,redirect_uri:f,cookie_policy:n,discoveryDocs:m,immediate:!0,fetch_basic_profile:F,callback:Z})),B&&M(B),O(!0)})},[v,w,N,u,P,b,T,f,_,m,n,r,Z,F,Y,X]),$=o.useCallback(function(){G&&(te.google?(c&&c(),Q?Q.requestAccessToken():te.google.accounts.id.prompt()):(D(),p("Google SDK isn't loaded!")))},[Q,G,D,c,p]);return q.createElement("div",{className:R,onClick:$},y)});o.memo(function(e){var u=e.state,d=u===void 0?"":u,v=e.scope,E=v===void 0?"repo,gist":v,w=e.client_id,C=e.client_secret,_=e.className,N=_===void 0?"":_,g=e.redirect_uri,R=e.allow_signup,I=R!==void 0&&R,P=e.isOnlyGetToken,j=P!==void 0&&P,T=e.isOnlyGetCode,c=T!==void 0&&T,p=e.children,a=e.onReject,l=e.onResolve,f=e.onLoginStart;o.useEffect(function(){var n=new URL(window.location.href),t=n.searchParams.get("code"),r=n.searchParams.get("state");r!=null&&r.includes("_github")&&t&&(localStorage.setItem("github",t),window.close())},[]);var L=o.useCallback(function(n){fetch("https://cors.bridged.cc/https://api.github.com//user",{method:"GET",headers:{Authorization:"token "+n.access_token,"x-cors-grida-api-key":J}}).then(function(t){return t.json()}).then(function(t){l({provider:"github",data:U({},t,n)})}).catch(function(t){a(t)})},[a,l]),b=o.useCallback(function(n){if(c)l({provider:"github",data:{code:n}});else{var t={code:n,state:d,redirect_uri:g,client_id:w,client_secret:C},r=new Headers({"Content-Type":"application/x-www-form-urlencoded","x-cors-grida-api-key":J});fetch("https://cors.bridged.cc/https://github.com/login/oauth/access_token",{method:"POST",headers:r,body:new URLSearchParams(t)}).then(function(h){return h.text()}).then(function(h){for(var m,y={},K=function(S,z){var G;if(typeof Symbol>"u"||S[Symbol.iterator]==null){if(Array.isArray(S)||(G=function(A,Q){if(A){if(typeof A=="string")return ae(A,void 0);var M=Object.prototype.toString.call(A).slice(8,-1);return M==="Object"&&A.constructor&&(M=A.constructor.name),M==="Map"||M==="Set"?Array.from(A):M==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(M)?ae(A,void 0):void 0}}(S))){G&&(S=G);var O=0;return function(){return O>=S.length?{done:!0}:{done:!1,value:S[O++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return(G=S[Symbol.iterator]()).next.bind(G)}(new URLSearchParams(h));!(m=K()).done;){var F=m.value;y[F[0]]=F[1]}y.access_token?j?l({provider:"github",data:y}):L(y):a("no data")}).catch(function(h){a(h)})}},[d,a,L,l,w,g,C,c,j]),k=o.useCallback(function(n){var t=n.type,r=n.code,h=n.provider;try{return Promise.resolve(t==="code"&&h==="github"&&r&&b(r))}catch(m){return Promise.reject(m)}},[b]),s=o.useCallback(function(){window.removeEventListener("storage",s,!1);var n=localStorage.getItem("github");n&&(k({provider:"github",type:"code",code:n}),localStorage.removeItem("instagram"))},[k]),i=o.useCallback(function(){f&&f(),window.addEventListener("storage",s,!1);var n=window.screen.width/2-225,t=window.screen.height/2-365;window.open("https://github.com/login/oauth/authorize?client_id="+w+"&scope="+E+"&state="+d+"_github&redirect_uri="+g+"&allow_signup="+I,"Github","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+t+", left="+n)},[E,d,w,g,I,f,s]);return q.createElement("div",{className:N,onClick:i},p)});o.memo(function(e){var u=e.state,d=u===void 0?"":u,v=e.client_id,E=e.client_secret,w=e.className,C=e.redirect_uri,_=e.fields,N=_===void 0?"id,username,account_type,media_count":_,g=e.scope,R=g===void 0?"user_profile,user_media":g,I=e.response_type,P=I===void 0?"code":I,j=e.isOnlyGetCode,T=j!==void 0&&j,c=e.isOnlyGetToken,p=c!==void 0&&c,a=e.children,l=e.onReject,f=e.onResolve,L=e.onLoginStart;o.useEffect(function(){var t=new URL(window.location.href),r=t.searchParams.get("code"),h=t.searchParams.get("state");h!=null&&h.includes("_instagram")&&r&&(localStorage.setItem("instagram",r),window.close())},[]);var b=o.useCallback(function(t){fetch("https://cors.bridged.cc/https://graph.instagram.com//me?fields="+N+"&access_token="+t.access_token,{method:"GET",headers:{"x-cors-grida-api-key":J}}).then(function(r){return r.json()}).then(function(r){f({provider:"instagram",data:U({},r,t)})}).catch(function(r){l(r)})},[N,l,f]),k=o.useCallback(function(t){if(T)f({provider:"instagram",data:{code:t}});else{var r={grant_type:"authorization_code",code:t,redirect_uri:C,client_id:v,client_secret:E},h=new Headers({"Content-Type":"application/x-www-form-urlencoded","x-cors-grida-api-key":J});fetch("https://cors.bridged.cc/https://api.instagram.com/oauth/access_token",{method:"POST",headers:h,body:new URLSearchParams(r)}).then(function(m){return m.json()}).then(function(m){m.access_token?p?f({provider:"instagram",data:m}):b(m):l("no data")}).catch(function(m){l(m)}).finally(function(){})}},[l,f,b,v,C,E,T,p]),s=o.useCallback(function(t){var r=t.type,h=t.code,m=t.provider;try{return Promise.resolve(r==="code"&&m==="instagram"&&h&&k(h))}catch(y){return Promise.reject(y)}},[k]),i=o.useCallback(function(){window.removeEventListener("storage",i,!1);var t=localStorage.getItem("instagram");t&&(s({provider:"instagram",type:"code",code:t}),localStorage.removeItem("instagram"))},[s]),n=o.useCallback(function(){L&&L(),window.addEventListener("storage",i,!1);var t=window.screen.width/2-225,r=window.screen.height/2-365;window.open("https://api.instagram.com/oauth/authorize?response_type="+P+"&client_id="+v+"&scope="+R+"&state="+d+"_instagram&redirect_uri="+C,"Instagram","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+r+", left="+t)},[R,d,v,C,L,P,i]);return q.createElement("div",{className:w,onClick:n},a)});o.memo(function(e){var u=e.tenant,d=u===void 0?"common":u,v=e.state,E=v===void 0?"":v,w=e.client_id,C=e.className,_=e.redirect_uri,N=e.scope,g=N===void 0?"profile openid email":N,R=e.response_type,I=R===void 0?"code":R,P=e.response_mode,j=P===void 0?"query":P,T=e.children,c=e.code_challenge,p=c===void 0?"19cfc47c216dacba8ca23eeee817603e2ba34fe0976378662ba31688ed302fa9":c,a=e.code_challenge_method,l=a===void 0?"plain":a,f=e.prompt,L=f===void 0?"select_account":f,b=e.isOnlyGetCode,k=b!==void 0&&b,s=e.isOnlyGetToken,i=s!==void 0&&s,n=e.onLoginStart,t=e.onReject,r=e.onResolve;o.useEffect(function(){var S=new URL(window.location.href),z=S.searchParams.get("code"),G=S.searchParams.get("state");G!=null&&G.includes("_microsoft")&&z&&(localStorage.setItem("microsoft",z),window.close())},[]);var h=o.useCallback(function(S){fetch("https://graph.microsoft.com/v1.0/me",{method:"GET",headers:{Authorization:"Bearer "+S.access_token}}).then(function(z){return z.json()}).then(function(z){r({provider:"microsoft",data:U({},z,S)})}).catch(function(z){t(z)})},[t,r]),m=o.useCallback(function(S){if(k)r({provider:"microsoft",data:{code:S}});else{var z={code:S,scope:g,client_id:w,redirect_uri:_,code_verifier:p,grant_type:"authorization_code"},G=new Headers({"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"});fetch("https://login.microsoftonline.com/"+d+"/oauth2/v2.0/token",{method:"POST",headers:G,body:new URLSearchParams(z)}).then(function(O){return O.json()}).then(function(O){O.access_token?i?r({provider:"microsoft",data:O}):h(O):t("no data")}).catch(function(O){t(O)})}},[g,d,t,h,w,r,_,p,k,i]),y=o.useCallback(function(S){var z=S.type,G=S.code,O=S.provider;try{return Promise.resolve(z==="code"&&O==="microsoft"&&G&&m(G))}catch(A){return Promise.reject(A)}},[m]),K=o.useCallback(function(){window.removeEventListener("storage",K,!1);var S=localStorage.getItem("microsoft");S&&(y({provider:"microsoft",type:"code",code:S}),localStorage.removeItem("microsoft"))},[y]),F=o.useCallback(function(){n&&n(),window.addEventListener("storage",K,!1);var S=window.screen.width/2-225,z=window.screen.height/2-365;window.open("https://login.microsoftonline.com/"+d+"/oauth2/v2.0/authorize?client_id="+w+`
        &response_type=`+I+`
        &redirect_uri=`+_+`
        &response_mode=`+j+`
        &scope=`+g+`
        &state=`+E+`_microsoft
        &prompt=`+L+`
        &code_challenge=`+p+`
        &code_challenge_method=`+l,"Microsoft","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+z+", left="+S)},[g,E,L,d,w,n,_,j,I,p,K,l]);return q.createElement("div",{className:C,onClick:F},T)});o.memo(function(e){var u=e.state,d=u===void 0?"":u,v=e.scope,E=v===void 0?"r_liteprofile":v,w=e.client_id,C=e.client_secret,_=e.className,N=_===void 0?"":_,g=e.redirect_uri,R=e.response_type,I=R===void 0?"code":R,P=e.isOnlyGetCode,j=P!==void 0&&P,T=e.isOnlyGetToken,c=T!==void 0&&T,p=e.children,a=e.onLoginStart,l=e.onReject,f=e.onResolve;o.useEffect(function(){var n=new URL(window.location.href),t=n.searchParams.get("code"),r=n.searchParams.get("state");r!=null&&r.includes("_linkedin")&&t&&(localStorage.setItem("linkedin",t),window.close())},[]);var L=o.useCallback(function(n){fetch("https://api.allorigins.win/get?url="+encodeURIComponent("https://api.linkedin.com/v2/me?oauth2_access_token="+n.access_token+"&projection=(id,profilePicture(displayImage~digitalmediaAsset:playableStreams),localizedLastName, firstName,lastName,localizedFirstName)"),{method:"GET"}).then(function(t){return t.json()}).then(function(t){var r=U({},n);if(t.contents){var h=JSON.parse(t.contents);typeof n=="object"&&Object.entries(h).map(function(m){r[m[0]]=m[1]})}f({provider:"linkedin",data:r})}).catch(function(t){l(t)})},[l,f]),b=o.useCallback(function(n){if(j)f({provider:"linkedin",data:{code:n}});else{var t={code:n,grant_type:"authorization_code",redirect_uri:g,client_id:w,client_secret:C},r=new Headers({"Content-Type":"application/x-www-form-urlencoded","x-cors-grida-api-key":J});fetch("https://cors.bridged.cc/https://www.linkedin.com/oauth/v2/accessToken",{method:"POST",headers:r,body:new URLSearchParams(t)}).then(function(h){return h.json()}).then(function(h){c?f({provider:"linkedin",data:h}):L(h)}).catch(function(h){l(h)})}},[l,f,w,L,g,C,j,c]),k=o.useCallback(function(n){var t=n.type,r=n.code,h=n.provider;try{return Promise.resolve(t==="code"&&h==="linkedin"&&r&&b(r))}catch(m){return Promise.reject(m)}},[b]),s=o.useCallback(function(){window.removeEventListener("storage",s,!1);var n=localStorage.getItem("linkedin");n&&(k({provider:"linkedin",type:"code",code:n}),localStorage.removeItem("linkedin"))},[k]),i=o.useCallback(function(){a&&a(),window.addEventListener("storage",s,!1);var n=window.screen.width/2-225,t=window.screen.height/2-365;window.open("https://www.linkedin.com/oauth/v2/authorization?response_type="+I+"&client_id="+w+"&scope="+E+"&state="+d+"_linkedin&redirect_uri="+g,"Linkedin","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+t+", left="+n)},[a,s,I,w,E,d,g]);return q.createElement("div",{className:N,onClick:i},p)});o.memo(function(e){var u=e.state,d=u===void 0?"":u,v=e.scope,E=v===void 0?"":v,w=e.client_id,C=e.client_secret,_=e.className,N=_===void 0?"":_,g=e.redirect_uri,R=e.isOnlyGetCode,I=R!==void 0&&R,P=e.isOnlyGetToken,j=P!==void 0&&P,T=e.children,c=e.onLoginStart,p=e.onReject,a=e.onResolve;o.useEffect(function(){var s=new URL(window.location.href),i=s.searchParams.get("code"),n=s.searchParams.get("state");n!=null&&n.includes("_pinterest")&&i&&(localStorage.setItem("pinterest",i),window.close())},[]);var l=o.useCallback(function(s){fetch("https://cors.bridged.cc/https://api.pinterest.com/v5/user_account",{method:"GET",headers:{Authorization:"Bearer "+s.access_token,"x-cors-grida-api-key":J}}).then(function(i){return i.json()}).then(function(i){a({provider:"pinterest",data:U({},s,i)})}).catch(function(i){return p(i)})},[p,a]),f=o.useCallback(function(s){try{var i=function(){if(!I){var n={code:s,redirect_uri:g,grant_type:"authorization_code"},t=[];for(var r in n){var h=encodeURIComponent(r),m=encodeURIComponent(n[r]);t.push(h+"="+m)}return t=t.join("&"),Promise.resolve(fetch("https://cors.bridged.cc/https://api.pinterest.com/v5/oauth/token",{method:"POST",headers:{Authorization:"Basic "+btoa(w+":"+C),"Content-Type":"application/x-www-form-urlencoded","x-cors-grida-api-key":J},body:t}).then(function(y){return y.json()}).catch(function(y){return p(y)})).then(function(y){y.access_token&&(j?a({provider:"pinterest",data:y}):l(y))})}a({provider:"pinterest",data:{code:s}})}();return Promise.resolve(i&&i.then?i.then(function(){}):void 0)}catch(n){return Promise.reject(n)}},[p,w,l,a,g,C,I,j]),L=o.useCallback(function(s){var i=s.type,n=s.code,t=s.provider;try{return Promise.resolve(i==="code"&&t==="pinterest"&&n&&f(n))}catch(r){return Promise.reject(r)}},[f]),b=o.useCallback(function(){window.removeEventListener("storage",b,!1);var s=localStorage.getItem("pinterest");s&&(L({provider:"pinterest",type:"code",code:s}),localStorage.removeItem("pinterest"))},[L]),k=o.useCallback(function(){c&&c(),window.addEventListener("storage",b,!1);var s=window.screen.width/2-225,i=window.screen.height/2-365;window.open("https://www.pinterest.com/oauth/?client_id="+w+"&scope="+E+"&state="+d+"_pinterest&redirect_uri="+g+"&response_type=code&scope=boards:read,pins:read,user_accounts:read","Pinterest","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+i+", left="+s)},[E,d,w,g,c,b]);return q.createElement("div",{className:N,onClick:k},T)});o.memo(function(e){var u=e.client_id,d=e.className,v=d===void 0?"":d,E=e.redirect_uri,w=e.children,C=e.fields,_=C===void 0?"created_at,description,entities,id,location,name,pinned_tweet_id,profile_image_url,protected,public_metrics,url,username,verified,withheld":C,N=e.state,g=N===void 0?"state":N,R=e.scope,I=R===void 0?"users.read%20tweet.read":R,P=e.isOnlyGetCode,j=P!==void 0&&P,T=e.isOnlyGetToken,c=T!==void 0&&T,p=e.onLoginStart,a=e.onReject,l=e.onResolve;o.useEffect(function(){var i=new URL(window.location.href),n=i.searchParams.get("code");i.searchParams.get("state")&&n&&(localStorage.setItem("twitter",""+n),window.close())},[]);var f=o.useCallback(function(i){fetch("https://cors.bridged.cc/https://api.twitter.com/2/users/me?user.fields="+_,{method:"GET",headers:{Authorization:"Bearer "+i.access_token,"x-cors-grida-api-key":J}}).then(function(n){return n.json()}).then(function(n){l({provider:"twitter",data:U({},i,n.data)})}).catch(function(n){return a(n)})},[_,a,l]),L=o.useCallback(function(i){try{var n=function(){if(!j){var t=new URLSearchParams({code:i,redirect_uri:E,client_id:u,grant_type:"authorization_code",code_verifier:"challenge"});return Promise.resolve(fetch("https://cors.bridged.cc/https://api.twitter.com/2/oauth2/token",{method:"POST",body:t,headers:{"Content-Type":"application/x-www-form-urlencoded","x-cors-grida-api-key":J}}).then(function(r){return r.json()}).catch(function(r){return a(r)})).then(function(r){r.access_token&&(c?l({provider:"twitter",data:r}):f(r))})}l({provider:"twitter",data:{code:i}})}();return Promise.resolve(n&&n.then?n.then(function(){}):void 0)}catch(t){return Promise.reject(t)}},[a,f,l,u,E,j,c]),b=o.useCallback(function(i){var n=i.type,t=i.code,r=i.provider;try{return Promise.resolve(n==="code"&&r==="twitter"&&t&&L(t))}catch(h){return Promise.reject(h)}},[L]),k=o.useCallback(function(){window.removeEventListener("storage",k,!1);var i=localStorage.getItem("twitter");i&&(b({provider:"twitter",type:"code",code:i}),localStorage.removeItem("twitter"))},[b]),s=o.useCallback(function(){try{p&&p(),window.addEventListener("storage",k,!1);var i=window.screen.width/2-225,n=window.screen.height/2-365;return window.open("https://twitter.com/i/oauth2/authorize?response_type=code&client_id="+u+"&redirect_uri="+E+"&scope="+I+"&state="+g+"&code_challenge=challenge&code_challenge_method=plain","twitter","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+n+", left="+i),Promise.resolve()}catch(t){return Promise.reject(t)}},[I,g,u,p,E,k]);return q.createElement("div",{className:v,onClick:s},w)});typeof Symbol<"u"&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),typeof Symbol<"u"&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var ie=window;o.memo(function(e){var u=e.client_id,d=e.scope,v=d===void 0?"name email":d,E=e.className,w=E===void 0?"":E,C=e.onLoginStart,_=e.onReject,N=e.onResolve,g=e.redirect_uri,R=g===void 0?"/":g,I=e.children,P=o.useRef(null),j=o.useState(!1),T=j[0],c=j[1];o.useEffect(function(){!T&&f()},[T]),o.useEffect(function(){return function(){P.current&&P.current.remove()}},[]);var p=o.useCallback(function(){return!!document.getElementById("apple-login")},[]),a=o.useCallback(function(b,k,s,i,n){k===void 0&&(k="script");var t=b.createElement(k);t.id=s,t.src=i,t.async=!0,t.defer=!0;var r=document.getElementsByTagName("script")[0];P.current=t,r&&r.parentNode&&r.parentNode.insertBefore(t,r),t.onload=n},[]),l=o.useCallback(function(b){N({provider:"apple",data:b})},[N]),f=o.useCallback(function(){p()?c(!0):a(document,"script","apple-login","https://appleid.cdn-apple.com/appleauth/static/jsapi/appleid/1/en_US/appleid.auth.js",function(){ie.AppleID.auth.init({clientId:u,scope:v,redirectURI:R,state:"origin:web",usePopup:!0}),c(!0)})},[v,u,R,a,p]),L=o.useCallback(function(){try{if(!T)return Promise.resolve();var b=function(){if(ie.AppleID){C&&C();var k=function(s,i){try{var n=Promise.resolve(ie.AppleID.auth.signIn()).then(function(t){l(t)})}catch(t){return i(t)}return n&&n.then?n.then(void 0,i):n}(0,function(s){_({err:s})});if(k&&k.then)return k.then(function(){})}else f(),_("Apple SDK isn't loaded!")}();return Promise.resolve(b&&b.then?b.then(function(){}):void 0)}catch(k){return Promise.reject(k)}},[l,T,f,C,_]);return q.createElement("div",{className:w,onClick:L},I)});o.memo(function(e){var u=e.state,d=u===void 0?"":u,v=e.scope,E=v===void 0?"user.info.basic":v,w=e.client_key,C=e.className,_=C===void 0?"":C,N=e.redirect_uri,g=e.children,R=e.onResolve,I=e.onLoginStart;o.useEffect(function(){var c=new URL(window.location.href),p=c.searchParams.get("code"),a=c.searchParams.get("state");a!=null&&a.includes("_tiktok")&&p&&(localStorage.setItem("tiktok",p),window.close())},[]);var P=o.useCallback(function(c){var p=c.type,a=c.code,l=c.provider;try{return Promise.resolve(p==="code"&&l==="tiktok"&&a&&R({provider:"tiktok",data:{code:a}}))}catch(f){return Promise.reject(f)}},[R]),j=o.useCallback(function(){window.removeEventListener("storage",j,!1);var c=localStorage.getItem("tiktok");c&&(P({provider:"tiktok",type:"code",code:c}),localStorage.removeItem("instagram"))},[P]),T=o.useCallback(function(){I&&I(),window.addEventListener("storage",j,!1);var c=window.screen.width/2-225,p=window.screen.height/2-365;window.open("https://www.tiktok.com/auth/authorize?client_key="+w+"&scope="+E+"&state="+d+"_tiktok&redirect_uri="+N+"&response_type=code","Github","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+p+", left="+c)},[E,d,w,N,I,j]);return q.createElement("div",{className:_,onClick:T},g)});export{pe as G,me as m};
