import{r as C,u as V,a as W,j as e,B as v,b,i as w,c as I,d as T}from"./index-4f0de649.js";import{m as q,G as E}from"./reactjs-social-login.modern-2051170d.js";import{u as D}from"./index.esm-46ade451.js";import{I as R,_ as m}from"./index-d88abc85.js";import{C as Z}from"./Container-2b996796.js";import{G as i}from"./Grid-d52c5c96.js";import{P as M}from"./List-73049a0a.js";import{T as p}from"./Typography-115a5f41.js";import{T as k}from"./TextField-ce8f00ce.js";import{M as N}from"./InputAdornment-51505da3.js";import{I as O}from"./IconButton-dbb6c459.js";import{V as H,a as $,L as A}from"./VisibilityOff-cdef55ed.js";import"./createSvgIcon-3da887ef.js";import"./createContainer-c86da3f3.js";import"./styled-54525563.js";import"./useTheme-699d2dd2.js";import"./useId-091cb0af.js";import"./Menu-dd567723.js";const J=()=>{var g,f;const[h,B]=C.useState(!1),u=V(),c=W(),P=()=>{B(d=>!d)},F=()=>{u("/user/signup")},G="213941177623-aeqnj46io8852pa2trm5kjrumnpsp8fc.apps.googleusercontent.com",L=D(),{register:x,handleSubmit:S,formState:_}=L,{errors:s}=_,z=d=>{w.post("/userlogin",d).then(t=>{var a,r,o,n,l;((a=t==null?void 0:t.data)==null?void 0:a.status)===!0?(m("login success",{icon:"ðŸ‘"}),localStorage.setItem("userAccessToken",(r=t==null?void 0:t.data)==null?void 0:r.accessToken),localStorage.setItem("userRefreshToken",(o=t==null?void 0:t.data)==null?void 0:o.refreshToken),c(I((n=t==null?void 0:t.data)==null?void 0:n.accessToken)),c(T((l=t==null?void 0:t.data)==null?void 0:l.userInfo)),u("/")):m.error("incorrect email or password")})};return e.jsx("div",{children:e.jsxs(Z,{maxWidth:"md",children:[e.jsx(R,{position:"top-left",reverseOrder:!1}),e.jsxs(i,{container:!0,spacing:2,direction:"row",justifyContent:"center",alignItems:"center",style:{minHeight:"100vh"},children:[e.jsx(i,{item:!0,md:6,xs:12,children:e.jsx(M,{elevation:0,sx:{padding:5},children:e.jsx("form",{onSubmit:S(z),noValidate:!0,children:e.jsxs(i,{container:!0,direction:"column",spacing:2,children:[e.jsx(p,{variant:"h5",style:{fontWeight:"bold",textAlign:"center",color:"#4B6190"},children:"canteenPro"}),e.jsx(p,{style:{textAlign:"center",color:"#8F95A2",fontSize:"14px",paddingTop:"6px"},children:"If you already a member then you can easily login!"}),e.jsx(i,{item:!0,children:e.jsx(k,{type:"email",fullWidth:!0,label:"email",placeholder:"Email address",variant:"outlined",color:"secondary",...x("email",{required:"email is required",pattern:{value:/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/i,message:"enter a valid email address"}}),error:!!s.email,helperText:(g=s==null?void 0:s.email)==null?void 0:g.message})}),e.jsx(i,{item:!0,children:e.jsx(k,{type:h?"text":"password",fullWidth:!0,label:"password",placeholder:"Enter the password",variant:"outlined",color:"secondary",InputProps:{endAdornment:e.jsx(N,{position:"end",children:e.jsx(O,{onClick:P,"aria-label":"password",edge:"end",children:h?e.jsx(H,{}):e.jsx($,{})})})},...x("password",{required:"password is required",maxLength:{value:8,message:"maximum eight letters"},minLength:{value:4,message:"minimum four letters"}}),error:!!s.password,helperText:(f=s==null?void 0:s.password)==null?void 0:f.message})}),e.jsx(i,{item:!0,children:e.jsx(v,{type:"submit",variant:"contained",fullWidth:!0,size:"large",children:"Login"})}),e.jsxs(i,{container:!0,justifyContent:"center",alignItems:"center",marginTop:2,marginBottom:2,children:[e.jsx(b,{flexGrow:1,children:e.jsx("hr",{})}),e.jsx(p,{variant:"body1",style:{margin:"0 1rem"},children:"or"}),e.jsx(b,{flexGrow:1,children:e.jsx("hr",{})})]}),e.jsx(i,{item:!0,children:e.jsx(q,{client_id:G,scope:"openid profile email",discoveryDocs:"offline",onResolve:async({provider:d,data:t})=>{const a=await t,r={name:a==null?void 0:a.name,email:a==null?void 0:a.email,image:a==null?void 0:a.picture};console.log(r,"userEmail is this"),w.post("/userlogin/googlelogin",r).then(o=>{var n,l,j,y;o.data.status===!0?(console.log("userloged successfully"),m("login success",{icon:"ðŸ‘"}),localStorage.setItem("userAccessToken",(n=o==null?void 0:o.data)==null?void 0:n.accessToken),localStorage.setItem("userRefreshToken",(l=o==null?void 0:o.data)==null?void 0:l.refreshToken),c(I((j=o==null?void 0:o.data)==null?void 0:j.accessToken)),c(T((y=o==null?void 0:o.data)==null?void 0:y.userInfo)),u("/")):m.error("not a valid email!")})},children:e.jsx(v,{variant:"outlined",startIcon:e.jsx(E,{}),fullWidth:!0,size:"large",children:"Google SignIn"})})}),e.jsxs(i,{item:!0,paddingTop:2,children:[e.jsx(A,{variant:"body2",style:{cursor:"pointer",color:"#5F5B5B",textDecoration:"none"},children:"Forgot password?"}),e.jsx("br",{}),e.jsx(A,{variant:"body2",style:{cursor:"pointer",color:"#5F5B5B",textDecoration:"none"},onClick:F,children:"If you don't have an account?"})]})]})})})}),e.jsx(i,{item:!0,md:6,xs:12,sx:{display:{xs:"none",sm:"none",md:"block"}},children:e.jsx("img",{className:"rounded-2xl",src:"https://img.freepik.com/free-vector/tablet-login-concept-illustration_114360-7963.jpg?w=740&t=st=1684240815~exp=1684241415~hmac=b79ccd28de26df85c4aef037b2b624b21817451db10b4af9423c3002a1ccefd6",alt:"canteenPro",style:{width:"100%",height:"100%",objectFit:"cover"}})})]})]})})},pe=()=>e.jsx("div",{children:e.jsx(J,{})});export{pe as default};
