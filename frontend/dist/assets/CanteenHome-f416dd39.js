import{s as i,B as k,j as e,b as a,r as x,a as q,i as C,A as U,d as Z,e as D,L as Y,u as F,t as X}from"./index-4f0de649.js";import{C as N}from"./Container-efad1350.js";import{B as T}from"./Box-edb0d1b4.js";import{i as O}from"./interopRequireDefault-01ffd8a5.js";import{r as M}from"./createSvgIcon-f63db057.js";import{u as G}from"./index.esm-46ade451.js";import{I as J,_ as W}from"./index-d88abc85.js";import{M as K}from"./List-73049a0a.js";import{T as Q}from"./TextField-ce8f00ce.js";import{T as g}from"./Typography-115a5f41.js";import{d as ee}from"./CurrencyRupee-46c12a2d.js";import{d as oe}from"./Add-4a17c95a.js";import{C as te}from"./Container-2b996796.js";import{S as ne}from"./Stack-822c0c26.js";import{P as re}from"./Pagination-ad4eebae.js";import"./createContainer-c86da3f3.js";import"./styled-54525563.js";import"./createSvgIcon-3da887ef.js";import"./useId-091cb0af.js";import"./useTheme-699d2dd2.js";import"./Menu-dd567723.js";import"./LastPage-ec77de69.js";const ae=i(N)(({theme:o})=>({backgroundColor:"#4B6190",height:"300px",borderRadius:"15px",display:"flex",justifyContent:"space-around",alignItems:"center",[o.breakpoints.down("md")]:{height:"auto",flexDirection:"column",alignItems:"center",padding:o.spacing(3,3,0,3),width:"90%"}})),se=i(T)(({theme:o})=>({padding:o.spacing(10,0,10,0),margin:o.spacing(0,2,0,2),[o.breakpoints.down("md")]:{padding:"1"}})),ie=i(T)(({theme:o})=>({display:"flex",flexDirection:"row",justifyContent:"space-around",[o.breakpoints.down("sm")]:{flexDirection:"column"}})),le=i(T)(({theme:o})=>({display:"flex",flexDirection:"column",justifyContent:"center"}));i(k)(({theme:o})=>({backgroundColor:"#fff",color:"#17275F",fontWeight:"700",fontSize:"14px",cursor:"pointer",padding:"0.5rem 1.25rem",borderRadius:"7px",textTransform:"none",display:"block",border:"2px solid transparent","&:hover":{backgroundColor:"white",color:"#146C94",borderColor:"#146C94"},[o.breakpoints.down("md")]:{margin:o.spacing(0,"auto",3,"auto,"),width:"90%"},[o.breakpoints.down("sm")]:{width:"90%"}}));var A={},ce=O;Object.defineProperty(A,"__esModule",{value:!0});var H=A.default=void 0,de=ce(M()),pe=e,me=(0,de.default)((0,pe.jsx)("path",{d:"M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM9 4h2v5l-1-.75L9 9V4zm9 16H6V4h1v9l3-2.25L13 13V4h5v16z"}),"BookOutlined");H=A.default=me;var P={},xe=O;Object.defineProperty(P,"__esModule",{value:!0});var V=P.default=void 0,ge=xe(M()),ue=e,fe=(0,ge.default)((0,ue.jsx)("path",{d:"M12 6c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2m0 10c2.7 0 5.8 1.29 6 2H6c.23-.72 3.31-2 6-2m0-12C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 10c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"PersonOutlined");V=P.default=fe;const he=i(k)(({theme:o})=>({backgroundColor:"#fff",color:"#17275F",fontWeight:"700",fontSize:"14px",cursor:"pointer",padding:"0.5rem 1.25rem",borderRadius:"7px",textTransform:"none",display:"block",border:"2px solid transparent","&:hover":{backgroundColor:"white",color:"#146C94",borderColor:"#146C94"},[o.breakpoints.down("md")]:{margin:o.spacing(0,"auto",3,"auto,"),width:"90%"},[o.breakpoints.down("sm")]:{width:"90%"}})),be=i(a)(({theme:o})=>({marginLeft:"5.5rem",[o.breakpoints.down("md")]:{marginLeft:"0rem"}})),je={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4},we=({canteenId:o,canteenEmail:h,setCanteenEmail:r,setImage:u,getTotalCanteenPackages:l})=>{var z,E;const[b,c]=x.useState(!1),j=()=>c(!0),t=()=>c(!1),d=G(),{register:m,handleSubmit:y,formState:s}=d,{errors:p}=s;x.useState(h);const f=q(),v=async w=>{var I,_;try{const R=w==null?void 0:w.Email,S=(I=w==null?void 0:w.image)==null?void 0:I[0];if(!!R||!!S){if(console.log(w),S){const B=await C.get("/service/s3service"),L=(_=B==null?void 0:B.data)==null?void 0:_.url;await U.put(L,S,{headers:{"Content-Type":"multipart/form-data"}});const $=L.split("?")[0];console.log($,"image url is this");const n=await C.patch("/allcanteen/editprofileimage",{imageUrl:$,canteenId:o});console.log(n,"changedimage"),l(),f(Z({canteenId:n==null?void 0:n.data._id,canteenName:n==null?void 0:n.data.canteenName,email:n==null?void 0:n.data.email,image:n==null?void 0:n.data.image,phone:n==null?void 0:n.data.phonenumber})),u(n==null?void 0:n.data.image)}c(!1)}else W.error("Nothing have to edit")}catch{W.error("An error occured...... Do after some time.......")}};return e.jsxs("div",{children:[e.jsx(be,{children:e.jsx(he,{onClick:j,children:"Edit Profile"})}),e.jsx(J,{position:"top-left",reverseOrder:!1}),e.jsx(K,{open:b,onClose:t,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:e.jsx(a,{sx:je,children:e.jsxs("form",{onSubmit:y(v),children:[e.jsx(a,{children:e.jsx(Q,{type:"text",fullWidth:!0,label:"Email",placeholder:"Enter the Email",variant:"outlined",color:"secondary",size:"small",...m("Email",{pattern:{value:/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/i,message:"Enter a valid email address"}}),error:!!p.Email,helperText:(z=p==null?void 0:p.Email)==null?void 0:z.message})}),e.jsxs(a,{children:[e.jsx("input",{type:"file",id:"image-upload-input",...m("image"),style:{display:"none"}}),e.jsx("label",{htmlFor:"image-upload-input",children:e.jsx(k,{variant:"outlined",component:"span",sx:{marginTop:2,borderColor:"#4B6190",color:"#4B6190"},children:"Update Profile Image"})}),d.watch("image")&&e.jsxs(g,{variant:"body2",children:["Selected Image: ",(E=d.watch("image")[0])==null?void 0:E.name]})]}),e.jsx(k,{type:"submit",variant:"contained",sx:{marginTop:4,width:"100%",padding:1.5,background:"#4B6190"},children:"Edit"})]})})})]})},ye=()=>{const[o,h]=x.useState(),r=D(s=>s==null?void 0:s.canteenInfo),u=r==null?void 0:r.canteenId,l=r==null?void 0:r.email,b=r==null?void 0:r.image,[c,j]=x.useState(l),[t,d]=x.useState(b),m=async()=>{const s=await C.get(`/canteen/canteentotalpackages?id=${u}`),p=s==null?void 0:s.data;h(p)},y=async()=>{var p;const s=await C.get(`/allcanteen/canteendetails?canteenId=${u}`);d((p=s==null?void 0:s.data)==null?void 0:p.image)};return x.useEffect(()=>{m(),y()},[]),e.jsx(se,{children:e.jsxs(ae,{children:[e.jsx(a,{sx:{display:"flex",justifyContent:"center"},children:e.jsx("img",{src:t||"https://img.uxwing.com/wp-content/themes/uxwing/download/peoples-avatars-thoughts/no-profile-picture-icon.svg",alt:"startIcon",style:{width:"200px",height:"200px",borderRadius:"50%",border:"1px solid white"}})}),e.jsxs(le,{children:[e.jsxs(ie,{children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",marginLeft:"1rem"},children:[e.jsx(H,{sx:{color:"white"}}),e.jsxs(g,{sx:{fontSize:"20px",color:"#F2EAD3",fontWeight:"700",textAlign:"center"},children:[e.jsx("span",{style:{color:"white"},children:"Bookings:"})," 0"]})]}),e.jsxs(a,{sx:{display:"flex",alignItems:"center",marginLeft:"1rem"},children:[e.jsx(V,{sx:{color:"white"}}),e.jsxs(g,{sx:{fontSize:"20px",color:"#F2EAD3",fontWeight:"700",textAlign:"center"},children:[e.jsx("span",{style:{color:"white"},children:"Packages:"})," ",o]})]})]}),e.jsx(g,{sx:{fontSize:"30px",color:"white",fontWeight:"700",textAlign:"center"},children:r==null?void 0:r.canteenName}),e.jsx(g,{sx:{fontSize:"16px",color:"#ccc",fontWeight:"500",my:2,textAlign:"center"},children:c}),e.jsx(a,{sx:{marginBottom:1},children:e.jsx(we,{canteenId:u,canteenEmail:l,setCanteenEmail:j,setImage:d,getTotalCanteenPackages:m})})]})]})})};i(a)(({theme:o})=>({display:"flex",cursor:"pointer",justifyContent:"space-between",marginTop:o.spacing(5),overflowX:"scroll",overflowY:"hidden",[o.breakpoints.down("md")]:{alignItems:"center"},"&::-webkit-scrollbar":{display:"none"}}));const ke=i(a)(({theme:o})=>({textAlign:"center",[o.breakpoints.down("md")]:{textAlign:"center"}})),Ce=i(N)(({theme:o})=>({backgroundColor:"#fff",height:"auto",display:"flex",width:"100%",padding:o.spacing(2,2,2,2),borderRadius:"15px",marginTop:"1rem",border:"1px solid #146C94",[o.breakpoints.down("sm")]:{flexDirection:"column",alignItems:"center"},"&:hover":{transform:"scale(0.9)",transition:"transform 0.2s ease-in-out",boxShadow:"0 0 10px rgba(0, 0, 0, 0.5)",opacity:.8,borderRadius:"0.5rem"}})),ve=i(a)({display:"flex",alignItems:"center"}),Se=i(k)(({theme:o})=>({backgroundColor:"#fff",color:"#4B6190",fontWeight:"700",fontSize:"14px",cursor:"pointer",padding:"0.5rem 1.25rem ",borderRadius:"7px",textTransform:"none",display:"block",border:"2px solid transparent",height:"3rem",marginTop:"1.5rem",borderColor:"#4B6190",marginLeft:"50%","&:hover":{backgroundColor:"white",color:"#4B6190",borderColor:"#4B6190"},[o.breakpoints.down("sm")]:{margin:o.spacing(0,"auto",3,"auto,"),width:"90%",height:"auto",marginTop:"0.5rem",marginLeft:"0%"},[o.breakpoints.down("md")]:{marginLeft:"0%"}})),Be=i(Y)(({theme:o})=>({backgroundColor:"#4B6190",color:"white",fontWeight:"700",fontSize:"14px",cursor:"pointer",padding:"0.5rem 1.25rem",marginLeft:"10px",borderRadius:"7px",textTransform:"none",textDecoration:"none",display:"block",border:"2px solid transparent",height:"1.8rem",marginTop:"1.5rem",textAlign:"center","&:hover":{backgroundColor:"white",color:"#146C94",borderColor:"#146C94"},[o.breakpoints.down("sm")]:{margin:o.spacing(0,"auto",3,"auto"),alignItems:"center",width:"85%",height:"auto",marginTop:"0.5rem",marginLeft:"0%"}})),Te=i(a)(({theme:o})=>({display:"flex",alignItems:"center",[o.breakpoints.down("sm")]:{marginLeft:"10px",paddingRight:9,marginBottom:"10px"}}));i(a)({display:"flex",justifyContent:"center",marginTop:"5px"});const Ae=i(a)(({theme:o})=>({display:"flex",flexDirection:"column",color:"#146C94",paddingLeft:"2rem",paddingRight:"2rem",[o.breakpoints.down("sm")]:{paddingLeft:"0rem"}})),Pe=({packageId:o,canteenId:h,total:r,canteenName:u,image:l,status:b})=>{const[c,j]=x.useState(b);F();const t=async()=>{try{await C.patch("/canteen/removepackage?id="+o),j(!c)}catch(d){console.log(d)}};return e.jsxs(a,{sx:{maxWidth:"100%"},children:[e.jsxs(Ce,{style:{opacity:c?.9:.4},children:[e.jsxs(ve,{children:[e.jsx(Te,{children:e.jsx("img",{src:l||"",alt:"canteen image",style:{width:"100px",height:"100px",borderRadius:"100px",border:"1px solid white",display:"block"}})}),e.jsxs(Ae,{children:[e.jsxs(g,{variant:"h6",sx:{fontWeight:"800",fontSize:"25px"},children:[e.jsx(ee,{fontSize:"small"})," ",r]}),c?e.jsx(g,{sx:{fontSize:"16px",fontWeight:"600",marginBottom:1,color:"#A0A7AB "},children:u}):e.jsxs(g,{sx:{textAlign:"center",color:"red",fontWeight:700,mt:2},children:["Removed from user view ",e.jsx("br",{}),e.jsx("span",{style:{color:"green",fontWeight:400},children:"click add to get user view"})]})]})]}),e.jsx(Se,{sx:{},onClick:t,children:c?"Remove":"Add"}),e.jsx(Be,{to:`/canteen/view/${o}`,children:"Views"})]}),e.jsx(a,{})]})},ze=()=>{const[o,h]=x.useState([]),[r,u]=x.useState(),l=D(t=>t==null?void 0:t.canteenInfo),b=F(),c=async t=>{var d,m,y,s;try{const p=`/canteen/getpackages?id=${l==null?void 0:l.canteenId}&pageNumber=${t}`;X("canteen");const f=await C.get(p),v=(m=(d=f==null?void 0:f.data)==null?void 0:d.response)==null?void 0:m.showPackages;u((s=(y=f==null?void 0:f.data)==null?void 0:y.response)==null?void 0:s.page),h(v||[])}catch(p){console.log(p,"error found")}};x.useEffect(()=>{c(1)},[]);const j=async(t,d)=>{try{c(d)}catch(m){console.log(m)}};return e.jsx(a,{sx:{mt:5,backgroundColor:"#F5FAFE",py:10},children:e.jsxs(te,{children:[e.jsx(k,{variant:"outlined",startIcon:e.jsx(oe,{style:{color:"#17275F"}}),style:{color:"#17275F",borderColor:"#17275F"},onClick:()=>b("/canteen/addpackages"),children:"Add"}),e.jsx(ke,{children:e.jsx(g,{sx:{color:"#000339",fontSize:"35px",fontWeight:"bold",paddingBottom:2,paddingTop:2},children:"All Your Active Packages"})}),o.length===0?e.jsx(g,{sx:{textAlign:"center",marginTop:5,color:"#000339"},children:"No Packages.....Add your packages"}):o.map(t=>e.jsx(Pe,{packageId:t._id,canteenId:t.canteenId,total:t.total,canteenName:l==null?void 0:l.canteenName,image:t==null?void 0:t.image,status:t==null?void 0:t.status})),e.jsx(ne,{spacing:2,sx:{alignItems:"center",marginTop:6},children:e.jsx(re,{count:r,onChange:j})})]})})},oo=()=>e.jsxs(e.Fragment,{children:[e.jsx(ye,{}),e.jsx(ze,{})]});export{oo as default};
