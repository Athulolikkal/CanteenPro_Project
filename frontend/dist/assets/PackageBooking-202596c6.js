import{r as h,j as e,b as r,e as R,B as D,i as M,s as k,u as Z}from"./index-4f0de649.js";import{d as g,L as H,A as Y,D as U,a as L}from"./DatePicker-32aa4a94.js";import{u as G}from"./index.esm-46ade451.js";import{I as J,_ as K}from"./index-d88abc85.js";import{M as Q}from"./List-73049a0a.js";import{T as o}from"./Typography-115a5f41.js";import{T as y}from"./TextField-ce8f00ce.js";import{i as X}from"./interopRequireDefault-01ffd8a5.js";import{r as V}from"./createSvgIcon-f63db057.js";import{I}from"./IconButton-dbb6c459.js";import{s as ee}from"./sweetalert.min-5fa46dc7.js";import"./Stack-822c0c26.js";import"./styled-54525563.js";import"./Grid-d52c5c96.js";import"./useTheme-699d2dd2.js";import"./createSvgIcon-3da887ef.js";import"./useId-091cb0af.js";import"./Chip-84e48e3a.js";import"./Menu-dd567723.js";import"./InputAdornment-51505da3.js";import"./ListItem-a8b35c76.js";const te=({setStartDate:n,setEndDate:p})=>{const f=Date.now(),[s,j]=h.useState(g(f).add(1,"day")),c=l=>{const u=(l==null?void 0:l.toDate())??null;p(u)},m=l=>{const u=(l==null?void 0:l.toDate())??null;n(u),j(g(u).add(1,"day"))};return e.jsx(e.Fragment,{children:e.jsx(r,{sx:{marginTop:"5rem",width:"100%"},children:e.jsx(r,{sx:{display:"flex",justifyContent:"center",width:"100%"},children:e.jsx(r,{children:e.jsx(H,{dateAdapter:Y,children:e.jsxs(U,{components:["DatePicker","DatePicker"],children:[e.jsx(L,{label:"StartDate",value:s,onChange:m,minDate:g(f).add(1,"day"),maxDate:g(f).add(30,"day")}),e.jsx(L,{label:"EndDate",value:null,minDate:g(s==null?void 0:s.toDate()).add(1,"day"),maxDate:g(s==null?void 0:s.toDate()).add(30,"day"),onChange:c})]})})})})})})},F={required:"must provide details",pattern:{value:/^[A-Za-z'-]+$/,message:"only accept letters"},minLength:{value:3,message:"Minimum twenty letters"},maxLength:{value:30,message:"Maximum hundred letters"}},ae={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4,marginLeft:"1rem"},_=({userDataFunction:n,userAddress:p})=>{var S,P,b,T,C,w,z;const[f,s]=h.useState(!1),j=()=>s(!0),c=()=>s(!1),m=R(i=>i.userInfo),l=m==null?void 0:m.userId,u=G(),{register:d,handleSubmit:t,formState:v,getValues:A}=u,{errors:a}=v,W=async i=>{i.userId=l,console.log(i,":is"),M.put("/user/adduseraddress",i).then(x=>{x.data.status===!0&&(K("Address Added",{icon:"👏"}),n(),c())}).catch(x=>console.log(x))};return e.jsxs("div",{children:[e.jsx(J,{position:"top-left",reverseOrder:!1}),p?e.jsx(D,{onClick:j,children:"Edit Booking Address"}):e.jsx(D,{onClick:j,children:"Add Booking Address"}),e.jsx(Q,{open:f,onClose:c,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:e.jsxs(r,{sx:ae,children:[e.jsx(o,{id:"modal-modal-title",variant:"h6",component:"h2",sx:{marginBottom:"2rem",textAlign:"center",fontWeight:700},children:"Add Your Booking Address"}),e.jsx("form",{onSubmit:t(W),children:e.jsxs(r,{sx:{width:"90%",display:"flex",flexDirection:"column",gap:"1rem",alignItems:"center"},children:[e.jsx(y,{type:"text",fullWidth:!0,label:"Name",placeholder:"Enter your full name",variant:"outlined",color:"secondary",size:"small",...d("Name",{required:"name is required",pattern:{value:/^(?!\s)[A-Za-z\s'-]+$/,message:"only accept letters"},minLength:{value:3,message:"Name must be at least 3 characters long"},maxLength:{value:30,message:"Name cannot exceed 30 characters"},validate:i=>!i.startsWith(" ")||"can't start with white spaces"}),error:!!a.Name,helperText:(S=a==null?void 0:a.Name)==null?void 0:S.message}),e.jsx(y,{type:"text",fullWidth:!0,label:"Phonenumber",placeholder:"Phone number",variant:"outlined",color:"secondary",size:"small",...d("Phonenumber",{required:"phone number is required",pattern:{value:/^\d{10}$/,message:"Please enter a valid phone number"}}),error:!!a.Phonenumber,helperText:(P=a==null?void 0:a.Phonenumber)==null?void 0:P.message}),e.jsx(y,{type:"text",fullWidth:!0,label:"Building",placeholder:"Enter the building address details",variant:"outlined",color:"secondary",size:"small",...d("Building",{required:"Building address is required",pattern:{value:/^(?!\s)[A-Za-z\s'-]+$/,message:"only accept letters"},minLength:{value:3,message:"building address must be at least 3 characters long"},maxLength:{value:50,message:"building address cannot exceed 50 characters"},validate:i=>!i.startsWith(" ")||"can't start with white spaces"}),error:!!a.Building,helperText:(b=a==null?void 0:a.Building)==null?void 0:b.message}),e.jsx(y,{type:"text",fullWidth:!0,label:"Street",placeholder:"Enter the street name",variant:"outlined",color:"secondary",size:"small",...d("Street",{...F}),error:!!a.Street,helperText:(T=a==null?void 0:a.Street)==null?void 0:T.message}),e.jsx(y,{type:"text",fullWidth:!0,label:"City",placeholder:"Enter the city name",variant:"outlined",color:"secondary",size:"small",...d("City",{...F}),error:!!a.City,helperText:(C=a==null?void 0:a.City)==null?void 0:C.message}),e.jsx(y,{type:"text",fullWidth:!0,label:"District",placeholder:"Enter the state name",variant:"outlined",color:"secondary",size:"small",...d("District",{...F}),error:!!a.District,helperText:(w=a==null?void 0:a.District)==null?void 0:w.message}),e.jsx(y,{type:"text",fullWidth:!0,label:"Pincode",placeholder:"Please enter your pincode",variant:"outlined",color:"secondary",size:"small",...d("Pincode",{required:"pincode is required",pattern:{value:/^[1-9]\d{5,5}$/,message:"Please enter a valid pincode"}}),error:!!a.Pincode,helperText:(z=a==null?void 0:a.Pincode)==null?void 0:z.message}),e.jsxs(r,{sx:{display:"flex"},children:[e.jsx(D,{type:"submit",children:"Save"}),e.jsx(D,{onClick:c,children:"Cancel"})]})]})})]})})]})};var q={},ne=X;Object.defineProperty(q,"__esModule",{value:!0});var O=q.default=void 0,ie=ne(V()),le=e,oe=(0,ie.default)((0,le.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");O=q.default=oe;const re=k(r)(({theme:n})=>({display:"flex",justifyContent:"center",flexDirection:"column",width:"70%",[n.breakpoints.down("md")]:{width:"100%"}})),se=k(r)(({theme:n})=>({display:"flex",backgroundColor:"#17275F",justifyContent:"center",borderRadius:"15px",flexDirection:"row",padding:"2rem",[n.breakpoints.down("md")]:{flexDirection:"column"}})),ce=({userAddress:n,userData:p})=>e.jsx(r,{sx:{display:"flex",justifyContent:"center"},children:e.jsx(re,{children:e.jsxs(se,{children:[e.jsxs(o,{sx:{textAlign:"center",color:"white",marginTop:"5.5px",fontSize:"14px"},children:[n==null?void 0:n.Name,","]}),e.jsxs(o,{sx:{textAlign:"center",color:"white",marginTop:"5.5px",fontSize:"14px"},children:[n==null?void 0:n.Building,","]}),e.jsxs(o,{sx:{textAlign:"center",color:"white",marginTop:"5.5px",fontSize:"14px"},children:[n==null?void 0:n.Street,","]}),e.jsxs(o,{sx:{textAlign:"center",color:"white",marginTop:"5.5px",fontSize:"14px"},children:[n==null?void 0:n.City,","]}),e.jsxs(o,{sx:{textAlign:"center",color:"white",marginTop:"5.5px",fontSize:"14px"},children:[n==null?void 0:n.District,","]}),e.jsxs(o,{sx:{textAlign:"center",color:"white",marginTop:"5.5px",fontSize:"14px"},children:["Ph: ",n==null?void 0:n.Phonenumber,","]}),e.jsxs(o,{sx:{textAlign:"center",color:"white",marginTop:"5.5px",fontSize:"14px"},children:["Pin: ",n==null?void 0:n.Pincode]}),e.jsx(I,{sx:{color:"white"},color:"inherit","aria-label":"Delete",children:e.jsx(O,{})})]})})}),Ee=()=>{var S,P,b,T,C,w,z;const n=Date.now(),[p,f]=h.useState(new Date(n+864e5)),[s,j]=h.useState(),[c,m]=h.useState(0);h.useState();const[l,u]=h.useState(),d=Z(),t=R(i=>i.wishDetails),v=R(i=>i.userInfo),A=v==null?void 0:v.userId;(t==null?void 0:t.data)===void 0&&d("/");const a=()=>{M.get(`/user/userdata?userId=${A}`).then(i=>{var x;u((x=i==null?void 0:i.data)==null?void 0:x.bookingAddress)}).catch(i=>{console.log(i)})};h.useEffect(()=>{a()},[]),h.useEffect(()=>{if(!s)m(0);else{const i=g(p),B=g(s).diff(i,"day");m(B+2)}},[p,s]);const W=async()=>{var i,x,B;try{if(await ee({title:"Are you sure",text:"Are you sure do you want to pay for the package",icon:"info"})){let E=0;c===30&&((i=t==null?void 0:t.data)!=null&&i.total)?E=(x=t==null?void 0:t.data)==null?void 0:x.total:E=((B=t==null?void 0:t.data)==null?void 0:B.totalPerDayRate)*c;const $=l==null?void 0:l.Phonenumber;d("/user/otpverification",{state:{phoneNumber:$,totalPayableAmount:E,userAddress:l,startDate:p,endDate:s,count:c}})}}catch(N){console.log(N)}};return e.jsx(e.Fragment,{children:e.jsxs(r,{sx:{background:"#F9F9F9",padding:5,borderRadius:"15px"},children:[e.jsx(r,{children:e.jsx(te,{setStartDate:f,setEndDate:j})}),e.jsxs(r,{sx:{display:"flex",justifyContent:"center"},children:[e.jsxs(o,{sx:{textAlign:"center",marginTop:"2rem"},children:["Count of days:",e.jsxs("span",{style:{fontSize:"20px",fontWeight:"bold"},children:[" ",c," "]})," "]}),(S=t==null?void 0:t.data)!=null&&S.total?e.jsxs(r,{sx:{marginTop:"2rem",display:"flex"},children:[e.jsxs(o,{sx:{textAlign:"center"},children:["Total Per Day Rate:",e.jsxs("span",{style:{fontSize:"20px",fontWeight:"bold"},children:[(P=t==null?void 0:t.data)==null?void 0:P.totalPerDayRate," "]})]}),e.jsxs(o,{sx:{textAlign:"center"},children:["Total Amount of Package:",e.jsx("span",{style:{fontSize:"20px",fontWeight:"bold"},children:(b=t==null?void 0:t.data)==null?void 0:b.total})," "]}),c!=30?e.jsxs(o,{sx:{textAlign:"center"},children:["Total Payable Amount:",e.jsx("span",{style:{fontSize:"20px",fontWeight:"bold"},children:((T=t==null?void 0:t.data)==null?void 0:T.totalPerDayRate)*c})," "]}):e.jsxs(o,{sx:{textAlign:"center"},children:["Total Payable Amount:",(C=t==null?void 0:t.data)==null?void 0:C.total," "]})]}):e.jsxs(r,{sx:{marginTop:"2rem",display:"flex"},children:[e.jsxs(o,{sx:{textAlign:"center"},children:["Total Per Day Rate:",e.jsx("span",{style:{fontSize:"20px",fontWeight:"bold"},children:(w=t==null?void 0:t.data)==null?void 0:w.totalPerDayRate}),"  "]}),e.jsxs(o,{sx:{textAlign:"center"},children:["Total Payable Amount:",e.jsxs("span",{style:{fontSize:"20px",fontWeight:"bold"},children:[((z=t==null?void 0:t.data)==null?void 0:z.totalPerDayRate)*c," "]})," "]})]})]}),e.jsx(r,{sx:{display:"flex",justifyContent:"center",marginTop:"2rem"},children:l?e.jsx(_,{userDataFunction:a,userAddress:l}):e.jsx(_,{userDataFunction:a})}),e.jsx(r,{sx:{marginTop:"1rem"},children:l?e.jsx(ce,{userAddress:l,userData:a}):e.jsx(o,{sx:{textAlign:"center"},children:"Add Address For Booking"})}),e.jsx(o,{sx:{textAlign:"center",marginTop:"2rem",color:"green"},children:"We Accept Payments Only Through Online"}),e.jsx(r,{sx:{display:"flex",justifyContent:"center"},children:l&&c>=1?e.jsx(D,{variant:"outlined",sx:{width:"70%",padding:"1rem",marginTop:"1rem"},onClick:W,children:"PayNow For Booking"}):e.jsx(D,{variant:"outlined",sx:{width:"70%",padding:"1rem",marginTop:"1rem"},children:"Before Booking Add Your Booking Address and Select Days For Booking"})})]})})};export{Ee as default};
